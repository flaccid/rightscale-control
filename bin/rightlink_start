#!/bin/bash -e

source /opt/rightscale/lib/rightscale_functions

logger -t RightScale "RightLink service start."

check_invoking_user_permissions
status > /dev/null
running=$?
if [ $running -eq 0 ]; then
  echo "RightLink is already running"
  exit 1
fi
init_cloud_state 0
check_invoking_user_permissions
init_os_state
check_for_rightscale
configure_proxy
check_boot_state
enroll_right_link_instance
deploy_right_link_agent
enable_right_link_core_dumps
start_right_link_agent
update_boot_state
